cordova.define("cordova/plugin/time",function(c,e,b){function d(k){}var f;if(window.PalmSystem){d("Window.PalmSystem Available");f=c("cordova/plugin/webos/service")}else{f={Request:function(k,l){d(k+" invoked. But I am a dummy because PalmSystem is not available");if(typeof l.onFailure==="function"){l.onFailure({returnValue:false,errorText:"PalmSystem Not Available. Cordova is not installed?"})}}}}var g=function(){};function i(l,m,k){if(l.errorCode===undefined||l.errorCode===null){l.errorCode=m}if(l.errorText===undefined||l.errorText===null){l.errorText=k}}var h=null;var a={};function j(k){if(h===null){f.Request("luna://com.webos.service.tv.systemproperty",{method:"getSystemInfo",parameters:{keys:["sdkVersion","boardType"]},onSuccess:function(l){d("getPlatformInfo: onSuccess");d("version : "+l.sdkVersion);var m=l.sdkVersion.split(".");if(m.length>=1&&m[0]==="1"){a={webOSVer:1,chipset:l.boardType.split("_")[0]}}else{if(m.length>=1&&m[0]==="2"){a={webOSVer:2,chipset:l.boardType.split("_")[0]}}else{if(m.length>=1&&m[0]==="3"){a={webOSVer:3,chipset:l.boardType.split("_")[0]}}else{a={webOSVer:0,chipset:""}}}}h=a.webOSVer;k(a)},onFailure:function(l){d("getPlatformInfo: onFailure");a={webOSVer:0,chipset:""};k(a)}})}else{k(a)}}g.prototype.setHolidayScheduleMode=function(l,m,n){d("setHolidayScheduleMode: "+n.enabled);if(n.enabled===null&&typeof m==="function"){var k={};i(k,"TSHM","Time.setHolidayScheduleMode returns failure. command was not defined.");m(k);d("Time.setHolidayScheduleMode invalid ");return}f.Request("luna://com.webos.service.commercial.signage.storageservice/settings/",{method:"set",parameters:{category:"commercial",settings:{holidayScheduleMode:(n.enabled===true)?"on":"off"}},onSuccess:function(o){d("setHolidayScheduleMode: On Success");if(o.returnValue===true){if(typeof l==="function"){l()}}},onFailure:function(o){d("setHolidayScheduleMode: On Failure");delete o.returnValue;if(typeof m==="function"){i(o,"TSHM","Time.setHolidayScheduleMode returns failure.");m(o)}}});d("Time.setHolidayScheduleMode Done")};g.prototype.getHolidayScheduleMode=function(k,l){d("getHolidayScheduleMode: ");f.Request("luna://com.webos.service.commercial.signage.storageservice/settings/",{method:"get",parameters:{category:"commercial",keys:["holidayScheduleMode"]},onSuccess:function(m){d("getHolidayScheduleMode: On Success");if(m.returnValue===true){var n={};n.enabled=(m.settings.holidayScheduleMode==="on")?true:false;if(typeof k==="function"){k(n)}}},onFailure:function(m){d("getHolidayScheduleMode: On Failure");delete m.returnValue;if(typeof l==="function"){i(m,"TGHM","Time.getHolidayScheduleMode returns failure.");l(m)}}});d("Time.getHolidayScheduleMode Done")};g.prototype.addHolidaySchedule=function(n,o,p){d("addHolidaySchedule: startMonth : "+p.startMonth+", startDay : "+p.startDay+", endMonth : "+p.endMonth+", endDay : "+p.endDay);var m=new Date((new Date()).getFullYear(),p.startMonth-1,p.startDay,0,0);var l=new Date((new Date()).getFullYear(),p.endMonth-1,p.endDay,0,0);if(typeof o==="function"){if(typeof p.startMonth!=="number"||typeof p.startDay!=="number"||isNaN(p.startMonth)||isNaN(p.startDay)||typeof p.endMonth!=="number"||typeof p.endDay!=="number"||isNaN(p.endMonth)||isNaN(p.endDay)){var k={};i(k,"TAHS","Time.addHolidaySchedule returns failure. parmas are not valid.");o(k);return}if(m.getMonth()!==p.startMonth-1||m.getDate()!==p.startDay||l.getMonth()!==p.endMonth-1||l.getDate()!==p.endDay){var k={};i(k,"TAHS","Time.addHolidaySchedule returns failure for out of range.");o(k);return}if(m.getTime()>l.getTime()){var k={};i(k,"TAHS","Time.addHolidaySchedule returns failure. schedule is not valid.");o(k);return}}f.Request("luna://com.webos.service.commercial.signage.storageservice/settings/",{method:"get",parameters:{category:"commercial",keys:["holidaySchedule"]},onSuccess:function(q){d("getHolidaySchedule: On Success");if(q.returnValue===true){if(typeof n==="function"){var u={};var t=null;var s=null;var v=q.settings.holidaySchedule;if(v.length>=7){var q={};i(q,"TAHS","Time.addHolidaySchedule returns failure. schedule list is full");o(q);return}for(var r=0;r<v.length;r++){t=new Date((new Date()).getFullYear(),v[r].startMonth-1,v[r].startDay,0,0);s=new Date((new Date()).getFullYear(),v[r].endMonth-1,v[r].endDay,0,0);if(((t.getTime()<=m.getTime())&&(s.getTime()>m.getTime()))||((t.getTime()<l.getTime())&&(s.getTime()>=l.getTime()))||((t.getTime()===m.getTime())&&(s.getTime()===l.getTime()))||((m.getTime()===l.getTime())&&(s.getTime()===m.getTime()))){var q={};i(q,"TAHS","Time.addHolidaySchedule returns failure. schedule is not valid");o(q);return}}u.startMonth=p.startMonth;u.startDay=p.startDay;u.endMonth=p.endMonth;u.endDay=p.endDay;v.push(u);d("scheduleList : "+JSON.stringify(v));f.Request("luna://com.webos.service.commercial.signage.storageservice/settings/",{method:"set",parameters:{category:"commercial",settings:{holidaySchedule:v}},onSuccess:function(w){d("addHolidaySchedule: On Success");if(w.returnValue===true){if(typeof n==="function"){n()}}},onFailure:function(w){d("addHolidaySchedule: On Failure");delete w.returnValue;if(typeof o==="function"){i(w,"TAHS","Time.addHolidaySchedule returns failure.");o(w)}}})}}},onFailure:function(q){d("addHolidaySchedule: On Failure");delete q.returnValue;if(typeof o==="function"){i(q,"TAHS","Time.addHolidaySchedule returns failure.");o(q)}}});d("Time.addHolidaySchedule Done")};g.prototype.delHolidaySchedule=function(l,m,n){d("delHolidaySchedule: id : "+n.scheduleId);if((typeof n.scheduleId!=="string"||n.scheduleId===undefined||n.scheduleId===null)&&typeof m==="function"){var k={};i(k,"TDHS","Time.delHolidaySchedule returns failure. scheduleId is not valid.");m(k);d("Time.delHolidaySchedule invalid ");return}f.Request("luna://com.webos.service.commercial.signage.storageservice/settings/",{method:"get",parameters:{category:"commercial",keys:["holidaySchedule"]},onSuccess:function(o){d("getHolidaySchedule: On Success");if(o.returnValue===true){if(typeof l==="function"){var s=null;var r=[];var p=false;s=o.settings.holidaySchedule;d("before scheduleList : "+JSON.stringify(s));for(var q=0;q<s.length;q++){if(s[q]._id===n.scheduleId){p=true}else{r.push(s[q])}}if(p===false&&typeof m==="function"){var o={};i(o,"TDHS","Time.delHolidaySchedule returns failure. can not find schedule id.");m(o);d("Time.delHolidaySchedule invalid ");return}d("after scheduleList : "+JSON.stringify(r));f.Request("luna://com.webos.service.commercial.signage.storageservice/settings/",{method:"set",parameters:{category:"commercial",settings:{holidaySchedule:r}},onSuccess:function(t){d("delHolidaySchedule: On Success");if(t.returnValue===true){if(typeof l==="function"){l()}}},onFailure:function(t){d("delHolidaySchedule: On Failure");delete t.returnValue;if(typeof m==="function"){i(t,"TDHS","Time.delHolidaySchedule returns failure.");m(t)}}})}}},onFailure:function(o){d("delHolidaySchedule: On Failure");delete o.returnValue;if(typeof m==="function"){i(o,"TDHS","Time.delHolidaySchedule returns failure.");m(o)}}});d("Time.delHolidaySchedule Done")};g.prototype.delAllHolidaySchedules=function(k,l){d("delAllHolidaySchedules: ");f.Request("luna://com.webos.service.commercial.signage.storageservice/settings/",{method:"set",parameters:{category:"commercial",settings:{holidaySchedule:[]}},onSuccess:function(m){d("delAllHolidaySchedules: On Success");if(m.returnValue===true){if(typeof k==="function"){k()}}},onFailure:function(m){d("delAllHolidaySchedules: On Failure");delete m.returnValue;if(typeof l==="function"){i(m,"TDAS","Time.delAllHolidaySchedules returns failure.");l(m)}}});d("Time.delAllHolidaySchedules Done")};g.prototype.getAllHolidaySchedules=function(k,l){d("getAllHolidaySchedules: ");f.Request("luna://com.webos.service.commercial.signage.storageservice/settings/",{method:"get",parameters:{category:"commercial",keys:["holidaySchedule"]},onSuccess:function(m){d("getHolidaySchedule: On Success");if(m.returnValue===true){if(typeof k==="function"){var n={};n.holidayScheduleList=m.settings.holidaySchedule;if(typeof k==="function"){k(n)}}}},onFailure:function(m){d("getAllHolidaySchedules: On Failure");delete m.returnValue;if(typeof l==="function"){i(m,"TGAS","Time.getAllHolidaySchedules returns failure.");l(m)}}});d("Time.getAllHolidaySchedules Done")};b.exports=g});Time=cordova.require("cordova/plugin/time");