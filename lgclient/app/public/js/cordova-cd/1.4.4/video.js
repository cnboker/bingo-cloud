cordova.define("cordova/plugin/video",function(c,e,b){function d(j){}var f;if(window.PalmSystem){d("Window.PalmSystem Available");f=c("cordova/plugin/webos/service")}else{f={Request:function(j,k){d(j+" invoked. But I am a dummy because PalmSystem is not available");if(typeof k.onFailure==="function"){k.onFailure({returnValue:false,errorText:"PalmSystem Not Available. Cordova is not installed?"})}}}}var i=function(){};function g(k,l,j){if(k.errorCode===undefined||k.errorCode===null){k.errorCode=l}if(k.errorText===undefined||k.errorText===null){k.errorText=j}}var a={webOSVer:-1,chipset:"undefined"};function h(j){if(a.webOSVer===-1){f.Request("luna://com.webos.service.tv.systemproperty",{method:"getSystemInfo",parameters:{keys:["sdkVersion","boardType"]},onSuccess:function(k){var l=k.sdkVersion.split(".");if(l.length>=1&&l[0]==="1"){a={webOSVer:1,chipset:k.boardType.split("_")[0]}}else{if(l.length>=1&&l[0]==="2"){a={webOSVer:2,chipset:k.boardType.split("_")[0]}}else{if(l.length>=1&&l[0]==="3"){a={webOSVer:3,chipset:k.boardType.split("_")[0]}}else{a={webOSVer:0,chipset:""}}}}j(a)},onFailure:function(k){a={webOSVer:0,chipset:""};j(a)}})}else{j(a)}}i.prototype.getVideoStatus=function(j,k){d("getVideoStatus: ");f.Request("luna://com.webos.service.tv.signage/",{method:"getVideoSize",onSuccess:function(l){d("getVideoStatus: On Success");if(l.returnValue===true){if(typeof j==="function"){var m={};m.source=l.videoSize.source;j(m)}}},onFailure:function(l){d("getVideoStatus: On Failure");delete l.returnValue;if(typeof k==="function"){g(l,"VGVS","Video.getVideoStatus returns failure.");k(l)}}});d("Video.getVideoStatus Done")};i.currentVideo={uri:null,source:null,tagId:null};i.prototype.setVideoSize=function(k,l,m){d("setVideoSize: "+JSON.stringify(m));if(m.source===undefined||typeof m.source.x!=="number"||typeof m.source.y!=="number"||typeof m.source.width!=="number"||typeof m.source.height!=="number"||isNaN(m.source.x)||isNaN(m.source.y)||isNaN(m.source.width)||isNaN(m.source.height)||m.source.x<0||m.source.y<0||m.source.width<=0||m.source.height<=0||m.source.width<16||m.source.height<16){if(typeof l==="function"){var j={};g(j,"VSVS","Video.setVideoSize returns failure. out of range or type error.");l(j)}return}f.Request("luna://com.webos.service.tv.signage/",{method:"getVideoSize",onSuccess:function(n){d("setVideoSize: On Success");if(n.returnValue===true){var r={};r.x=n.videoSize.destination.x;r.y=n.videoSize.destination.y;r.width=n.videoSize.destination.width;r.height=n.videoSize.destination.height;var o=document.getElementsByTagName("video");var q=false;for(var p=0;p<o.length;p++){if(o[p].currentTime>0){q=true;if(i.currentVideo.uri!==o[p].src||(o[p].id!==null&&o[p].id!==undefined&&i.currentVideo.tagId!==null&&i.currentVideo.tagId!==undefined&&i.currentVideo.tagId!==o[p].id)){i.currentVideo.uri=o[p].src;i.currentVideo.source=n.videoSize.source;i.currentVideo.tagId=o[p].id}break}}if(q===false){f.Request("luna://com.webos.service.eim/",{method:"getCurrentInput",parameters:{},onSuccess:function(t){if(t.returnValue===true&&i.currentVideo.uri!==t.mainInputSourceId||(o[0].id!==null&&o[0].id!==undefined&&i.currentVideo.tagId!==null&&i.currentVideo.tagId!==undefined&&i.currentVideo.tagId!==o[0].id)){i.currentVideo.uri=t.mainInputSourceId;i.currentVideo.tagId=(o[0]!==null&&o[0].id!==null&&o[0].id!==undefined?o[0].id:null);f.Request("luna://com.webos.service.tv.signage/",{method:"getVideoSize",onSuccess:function(x){d("setVideoSize: On Success 1");if(x.returnValue===true){i.currentVideo.source=x.videoSize.source;if(x.videoSize.source.width===0&&x.videoSize.source.height===0){i.currentVideo={uri:null,source:null,tagId:null};var w={};g(w,"VSVS","Video.setVideoSize returns failure. Not ready to setVideoSize.");l(w);return}else{if(i.currentVideo.uri===null||i.currentVideo.source===null||(m.source.width+m.source.x)>(i.currentVideo.source.x+i.currentVideo.source.width)||(m.source.height+m.source.y)>(i.currentVideo.source.y+i.currentVideo.source.height)){var v={};g(v,"VSVS","Video.setVideoSize returns failure. out of range or type error.("+i.currentVideo.source.width+" : "+i.currentVideo.source.height+")");l(v);return}}f.Request("luna://com.webos.service.tv.signage/",{method:"setVideoSize",parameters:{videoSize:{source:{x:m.source.x,y:m.source.y,width:m.source.width,height:m.source.height},destination:{x:r.x,y:r.y,width:r.width,height:r.height}}},onSuccess:function(y){d("setVideoSize: On Success 2");if(y.returnValue===true&&typeof k==="function"){k();return}},onFailure:function(y){d("setVideoSize: On Failure 2");delete y.returnValue;if(typeof l==="function"){g(y,"VSVS","Video.setVideoSize returns failure. Can't current video source size.");l(y);return}}})}}})}else{if(i.currentVideo.uri===null||i.currentVideo.source===null||(m.source.width+m.source.x)>(i.currentVideo.source.x+i.currentVideo.source.width)||(m.source.height+m.source.y)>(i.currentVideo.source.y+i.currentVideo.source.height)){var u={};g(u,"VSVS","Video.setVideoSize returns failure. out of range or type error.("+i.currentVideo.source.width+" : "+i.currentVideo.source.height+")");l(u);return}f.Request("luna://com.webos.service.tv.signage/",{method:"setVideoSize",parameters:{videoSize:{source:{x:m.source.x,y:m.source.y,width:m.source.width,height:m.source.height},destination:{x:r.x,y:r.y,width:r.width,height:r.height}}},onSuccess:function(v){d("setVideoSize: On Success 3");if(v.returnValue===true&&typeof k==="function"){k();return}},onFailure:function(v){d("setVideoSize: On Failure 3");delete v.returnValue;if(typeof l==="function"){g(v,"VSVS","Video.setVideoSize returns failure. Can't current video source size.");l(v);return}}})}},onFailure:function(t){d("setVideoSize: On Failure 3");delete t.returnValue;if(typeof l==="function"){g(t,"VSVS","Video.setVideoSize returns failure. Can't set current video source size.");l(t);return}}})}else{if(i.currentVideo.uri===null||i.currentVideo.source===null||(m.source.width+m.source.x)>(i.currentVideo.source.x+i.currentVideo.source.width)||(m.source.height+m.source.y)>(i.currentVideo.source.y+i.currentVideo.source.height)){var s={};g(s,"VSVS","Video.setVideoSize returns failure. out of range or type error.("+i.currentVideo.source.width+" : "+i.currentVideo.source.height+")");l(s);return}f.Request("luna://com.webos.service.tv.signage/",{method:"setVideoSize",parameters:{videoSize:{source:{x:m.source.x,y:m.source.y,width:m.source.width,height:m.source.height},destination:{x:r.x,y:r.y,width:r.width,height:r.height}}},onSuccess:function(t){d("setVideoSize: On Success 4");if(t.returnValue===true&&typeof k==="function"){k();return}},onFailure:function(t){d("setVideoSize: On Failure 4");delete t.returnValue;if(typeof l==="function"){g(t,"VSVS","Video.setVideoSize returns failure. Can't current video source size.");l(t);return}}})}}},onFailure:function(n){d("setVideoSize: On Failure");delete n.returnValue;if(typeof l==="function"){g(n,"VSVS","Video.setVideoSize returns failure.");l(n);return}}});d("Video.setVideoSize Done")};i.prototype.setContentRotation=function(j,k,l){d("setContentRotation: ");h(function(n){if(n.webOSVer===3){if(typeof k==="function"){var m={};g(m,"VSCR","Video.setContentRotation is not supported in WEBOS 3.0.");k(m);return}}if(typeof l==="undefined"||l===null||(l.degree!=="off"&&l.degree!=="90"&&l.degree!=="270")||(l.aspectRatio!=="full"&&l.aspectRatio!="original")){var m={};g(m,"VSCR","Video.setContentRotation invlalid parameters.")}f.Request("luna://com.webos.service.commercial.signage.storageservice/video/",{method:"setContentRotation",parameters:l,onSuccess:function(o){d("setContentRotation: On Success");if(o.returnValue===true&&typeof j==="function"){j();return}},onFailure:function(o){d("setContentRotation: On Failure");delete o.returnValue;if(typeof k==="function"){g(o,"VSCR","Video.setContentRotation returns failure.");k(o);return}}});d("Video.setContentRotation: Done ")})};i.prototype.getContentRotation=function(j,k){d("getContentRotation: ");h(function(m){if(m.webOSVer===3){if(typeof k==="function"){var l={};g(l,"VSCR","Video.getContentRotation is not supported in WEBOS 3.0.");k(l);return}}f.Request("luna://com.webos.service.commercial.signage.storageservice/video/",{method:"getContentRotation",onSuccess:function(n){d("getContentRotation: On Success");if(n.returnValue===true){if(typeof j==="function"){delete n.returnValue;j(n)}}},onFailure:function(n){d("getContentRotation: On Failure");delete n.returnValue;if(typeof k==="function"){g(n,"VGCR","Video.getContentRotation returns failure.");k(n)}}});d("Video.getContentRotation Done")})};i.prototype.setVideoViewTransform=function(j,l,k){if(typeof k.x!=="number"||typeof k.y!=="number"||typeof k.width!=="number"||typeof k.height!=="number"){l({errorCode:"VSVVT",errorText:"Invalid Parameter type."})}h(function(n){var p,o;if(n.webOSVer===3){if(typeof l==="function"){var m={};g(m,"VSVT","Video.setVideoViewTransform is not supported in WEBOS 3.0.");l(m);return}}if(n.webOSVer===2&&n.chipset==="H15"){p=3840;o=2160}else{p=1920;o=1080}f.Request("luna://com.webos.service.commercial.signage.storageservice/video/",{method:"getMediaID",onSuccess:function(q){if(q.returnValue===true){var r=q.id;f.Request("luna://com.webos.service.tv.display/",{method:"setCustomDisplayWindow",parameters:{context:r,sourceInput:{positionX:0,positionY:0,width:p,height:o},displayOutput:{positionX:k.x,positionY:k.y,width:k.width,height:k.height}},onSuccess:function(s){if(s.returnValue===true){if(typeof j==="function"){j()}}else{delete s.returnValue;if(typeof l==="function"){l({errorCode:"VSVT",errorText:"Failed to set video transition"})}}},onFailure:function(s){delete s.returnValue;if(typeof l==="function"){l({errorCode:"VSVVT",errorText:"Failed to set video transition"})}}})}},onFailure:function(q){delete q.returnValue;if(typeof l==="function"){l({errorCode:"VSVVT",errorText:"Cannot found video area"})}}})})};i.prototype.setRotatedVideoTransform=function(j,l,k){h(function(n){var p,o;if(n.webOSVer===3){if(typeof l==="function"){var m={};g(m,"VSRT","Video.setRotatedVideoTransform is not supported in WEBOS 3.0.");l(m);return}}if(n.webOSVer===2&&n.chipset==="H15"){p=3840;o=2160}else{p=1920;o=1080}if(typeof k.x!=="number"||typeof k.y!=="number"||typeof k.width!=="number"||typeof k.height!=="number"){l({errorCode:"VSRVT",errorText:"Invalid Parameter type."})}f.Request("luna://com.webos.service.commercial.signage.storageservice/video/",{method:"getContentRotation",onSuccess:function(r){var s,q,t,u;if(r.degree==="off"){l({errorCode:"VSRVT",errorText:"Content must be applied content rotation first."});return}else{if(r.degree==="90"){s=p-(k.y+k.height),q=k.x,t=k.height,u=k.width}else{if(r.degree==="270"){s=k.y,q=o-(k.x+k.width),t=k.height,u=k.width}}}f.Request("luna://com.webos.service.commercial.signage.storageservice/video/",{method:"getMediaID",onSuccess:function(v){if(v.returnValue===true){var w=v.id;if(n.webOSVer===2&&n.chipset==="H15"){f.Request("luna://com.webos.service.tv.display/",{method:"setDisplayWindow",parameters:{context:w,fullScreen:false,displayOutput:{positionX:s,positionY:q,width:t,height:u}},onSuccess:function(x){if(x.returnValue===true){if(typeof j==="function"){j()}}else{delete x.returnValue;if(typeof l==="function"){l({errorCode:"VSRVT",errorText:"Failed to set video transition"})}}},onFailure:function(x){delete x.returnValue;if(typeof l==="function"){l({errorCode:"VSRVT",errorText:"Failed to set video transition: "+x.errorText})}}})}else{f.Request("luna://com.webos.service.tv.display/",{method:"setRotateDisplayWindow",parameters:{context:w,fullScreen:false,displayOutput:{positionX:s,positionY:q,width:t,height:u}},onSuccess:function(x){if(x.returnValue===true){if(typeof j==="function"){j()}}else{delete x.returnValue;if(typeof l==="function"){l({errorCode:"VSRVT",errorText:"Failed to set video transition"})}}},onFailure:function(x){delete x.returnValue;if(typeof l==="function"){l({errorCode:"VSRVT",errorText:"Failed to set video transition: "+x.errorText})}}})}}},onFailure:function(v){delete v.returnValue;if(typeof l==="function"){l({errorCode:"VSRVT",errorText:"Cannot found video area"})}}})},onFailure:function(q){if(typeof l==="function"){l({errorCode:"VSRVT",errorText:"Cannot check content rotation."})}}})})};b.exports=i});Video=cordova.require("cordova/plugin/video");