Power=function(){var e,t;function i(e,t,n){void 0!==e.errorCode&&null!==e.errorCode||(e.errorCode=t),void 0!==e.errorText&&null!==e.errorText||(e.errorText=n)}function o(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!=t.length)return!1;e.sort(),t.sort();for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}"object"==typeof window?(cordova.define("cordova/plugin/power",function(n,i,o){e=function(){},t=window.PalmSystem?n("cordova/plugin/webos/service"):{Request:function(e,t){"function"==typeof t.onFailure&&t.onFailure({returnValue:!1,errorText:"PalmSystem Not Available. Cordova is not installed?"})}},o.exports=e}),e=cordova.require("cordova/plugin/power")):(e=function(e){(t=e).Request=function(e,n){var i=e+"/"+n.method,o={};!0===n.hasOwnProperty("parameters")&&(o=n.parameters);var r={};t&&t.call(i,o,function(e){console.log("res : "+JSON.stringify(e)),!0===e.payload.returnValue?(r=e.payload,n.onSuccess(r)):(r.returnValue=!1,r.errorCode=e.payload.errorCode,r.errorText=e.payload.errorText,n.onFailure(r))})}},module.exports=e);var r=null,u={};function s(e){null===r?t.Request("luna://com.webos.service.tv.systemproperty",{method:"getSystemInfo",parameters:{keys:["sdkVersion","boardType"]},onSuccess:function(t){t.sdkVersion;var n=t.sdkVersion.split(".");u=n.length>=1?"1"==n[0]?{webOSVer:1,chipset:t.boardType.split("_")[0]}:"2"==n[0]?{webOSVer:2,chipset:t.boardType.split("_")[0]}:"3"==n[0]?{webOSVer:3,chipset:t.boardType.split("_")[0]}:"4"==n[0]?{webOSVer:4,chipset:t.boardType.split("_")[0]}:{webOSVer:0,chipset:""}:{webOSVer:0,chipset:""},r=u.webOSVer,delete t.returnValue,e(u)},onFailure:function(t){delete t.returnValue,e(u={webOSVer:0,chipset:""})}}):e(u)}return e.PowerCommand={SHUTDOWN:"powerOff",REBOOT:"reboot"},e.DisplayMode={DISPLAY_OFF:"Screen Off",DISPLAY_ON:"Active"},e.TimerWeek={MONDAY:1,TUESDAY:2,WEDNESDAY:4,THURSDAY:8,FRIDAY:16,SATURDAY:32,SUNDAY:64,EVERYDAY:127},e.DPMSignalType={CLOCK:"clock",CLOCK_WITH_DATA:"clockAndData"},e.PMMode={PowerOff:"powerOff",SustainAspectRatio:"sustainAspectRatio",ScreenOff:"screenOff",ScreenOffAlways:"screenOffAlways",ScreenOffBacklight:"screenOffBacklight"},e.prototype.getPowerStatus=function(e,o){s(function(r){4===r.webOSVer||r.webOSVer>4?t.Request("luna://com.webos.service.commercial.scapadapter/power/",{method:"getPowerStatus",parameters:{},onSuccess:function(t){delete t.returnValue,"function"==typeof e&&e(t)},onFailure:function(e){delete e.returnValue,"function"==typeof o&&(i(n,"PGPS","Power.getPowerStatus returns failure."),o(n))}}):t.Request("luna://com.webos.service.tv.signage/",{method:"getPowerState",onSuccess:function(n){var r={};!0===n.returnValue&&(r.displayMode=n.state),t.Request("luna://com.webos.service.commercial.signage.storageservice/settings/",{method:"get",parameters:{category:"commercial",keys:["wolEnable"]},onSuccess:function(n){!0===n.returnValue&&(r.wakeOnLan="1"===n.settings.wolEnable),t.Request("luna://com.webos.service.commercial.signage.storageservice/settings/",{method:"get",parameters:{category:"time",keys:["onTimerEnable","offTimerEnable"]},onSuccess:function(t){!0===t.returnValue&&(r.allOnTimer="on"===t.settings.onTimerEnable,r.allOffTimer="on"===t.settings.offTimerEnable,"function"==typeof e&&e(r))},onFailure:function(e){delete e.returnValue,"function"==typeof o&&(i(e,"PGPS","Power.getPowerStatus returns failure."),o(e))}})},onFailure:function(e){delete e.returnValue,"function"==typeof o&&(i(e,"PGPS","Power.getPowerStatus returns failure."),o(e))}})},onFailure:function(e){delete e.returnValue,"function"==typeof o&&(i(e,"PGPS","Power.getPowerStatus returns failure."),o(e))}})})},e.prototype.enableAllOnTimer=function(e,n,o){JSON.stringify(o);var r=null;switch(o.allOnTimer){case!0:r="on";break;case!1:r="off";break;default:if("function"==typeof n){var u={};i(u,"PEAOT","Power.enableAllOnTimer returns failure. Invalid option value."),n(u)}return}s(function(u){4===u.webOSVer||u.webOSVer>4?t.Request("luna://com.webos.service.commercial.scapadapter/settings/",{method:"set",parameters:{category:"time",settings:{onTimerEnable:r}},onSuccess:function(){!0===o.clearOnTimer?t.Request("luna://com.webos.service.commercial.scapadapter/settings/",{method:"get",parameters:{category:"commercial",keys:["onOffTimeSchedule"]},onSuccess:function(o){if(!0===o.returnValue){var r=0,u={onTime:[],offTime:[]},s={},f=null===o.settings.onOffTimeSchedule.offTime||void 0===o.settings.onOffTimeSchedule.offTime?0:o.settings.onOffTimeSchedule.offTime.length;for(r=0;r<f;r++)void 0!==o.settings.onOffTimeSchedule.offTime[r].day&&null!==o.settings.onOffTimeSchedule.offTime[r].day&&(s.day=o.settings.onOffTimeSchedule.offTime[r].day),void 0!==o.settings.onOffTimeSchedule.offTime[r].hour&&null!==o.settings.onOffTimeSchedule.offTime[r].hour&&(s.hour=o.settings.onOffTimeSchedule.offTime[r].hour),void 0!==o.settings.onOffTimeSchedule.offTime[r].minute&&null!==o.settings.onOffTimeSchedule.offTime[r].minute&&(s.minute=o.settings.onOffTimeSchedule.offTime[r].minute),u.offTime.push(s),s={};t.Request("luna://com.webos.service.commercial.scapadapter/settings/",{method:"set",parameters:{category:"commercial",settings:{onOffTimeSchedule:u}},onSuccess:function(){"function"==typeof e&&e()},onFailure:function(e){delete e.returnValue,"function"==typeof n&&(i(e,"PAOT","Power.enableAllOnTimer returns failure."),n(e))}})}else"function"==typeof e&&e()},onFailure:function(e){delete e.returnValue,"function"==typeof n&&(i(e,"PEAOT","Power.enableAllOnTimer returns failure."),n(e))}}):"function"==typeof e&&e()},onFailure:function(e){delete e.returnValue,"function"==typeof n&&(i(e,"PEAOT","Power.enableAllOnTimer returns failure."),n(e))}}):t.Request("luna://com.webos.service.commercial.signage.storageservice/settings/",{method:"set",parameters:{category:"time",settings:{onTimerEnable:r}},onSuccess:function(){!0===o.clearOnTimer?t.Request("luna://com.webos.service.commercial.signage.storageservice/settings/",{method:"set",parameters:{category:"commercial",settings:{multiOnTimerHour:["0","0","0","0","0","0","0"],multiOnTimerMinute:["0","0","0","0","0","0","0"],multiOnTimerWeekday:["0","0","0","0","0","0","0"],multiOnTimerSource:["0","0","0","0","0","0","0"],onTimerCount:0,onTimerSchedule:[]}},onSuccess:function(){"function"==typeof e&&e()},onFailure:function(e){delete e.returnValue,"function"==typeof n&&(i(e,"PEAOT","Power.enableAllOnTimer returns failure. / clearOnTimer"),n(e))}}):"function"==typeof e&&e()},onFailure:function(e){delete e.returnValue,"function"==typeof n&&(i(e,"PEAOT","Power.enableAllOnTimer returns failure."),n(e))}})})},e.prototype.enableAllOffTimer=function(e,n,o){JSON.stringify(o);var r=null;switch(o.allOffTimer){case!0:r="on";break;case!1:r="off";break;default:if("function"==typeof n){var u={};i(u,"PEAOT","Power.enableAllOffTimer returns failure. Invalid option value."),n(u)}return}s(function(u){4===u.webOSVer||u.webOSVer>4?t.Request("luna://com.webos.service.commercial.scapadapter/settings/",{method:"set",parameters:{category:"time",settings:{offTimerEnable:r}},onSuccess:function(){!0===o.clearOffTimer?t.Request("luna://com.webos.service.commercial.scapadapter/settings/",{method:"get",parameters:{category:"commercial",keys:["onOffTimeSchedule"]},onSuccess:function(o){if(!0===o.returnValue){var r=0,u={onTime:[],offTime:[]},s={},f=null===o.settings.onOffTimeSchedule.onTime||void 0===o.settings.onOffTimeSchedule.onTime?0:o.settings.onOffTimeSchedule.onTime.length;for(r=0;r<f;r++)void 0!==o.settings.onOffTimeSchedule.onTime[r].day&&null!==o.settings.onOffTimeSchedule.onTime[r].day&&(s.day=o.settings.onOffTimeSchedule.onTime[r].day),void 0!==o.settings.onOffTimeSchedule.onTime[r].hour&&null!==o.settings.onOffTimeSchedule.onTime[r].hour&&(s.hour=o.settings.onOffTimeSchedule.onTime[r].hour),void 0!==o.settings.onOffTimeSchedule.onTime[r].minute&&null!==o.settings.onOffTimeSchedule.onTime[r].minute&&(s.minute=o.settings.onOffTimeSchedule.onTime[r].minute),u.onTime.push(s),s={};t.Request("luna://com.webos.service.commercial.scapadapter/settings/",{method:"set",parameters:{category:"commercial",settings:{onOffTimeSchedule:u}},onSuccess:function(){"function"==typeof e&&e()},onFailure:function(e){delete e.returnValue,"function"==typeof n&&(i(e,"PAOT","Power.enableAllOffTimer returns failure."),n(e))}})}else"function"==typeof e&&e()},onFailure:function(e){delete e.returnValue,"function"==typeof n&&(i(e,"PEAOT","Power.enableAllOffTimer returns failure."),n(e))}}):"function"==typeof e&&e()},onFailure:function(e){delete e.returnValue,"function"==typeof n&&(i(e,"PEAOT","Power.enableAllOffTimer returns failure."),n(e))}}):t.Request("luna://com.webos.service.commercial.signage.storageservice/settings/",{method:"set",parameters:{category:"time",settings:{offTimerEnable:r}},onSuccess:function(){!0===o.clearOffTimer?t.Request("luna://com.webos.service.commercial.signage.storageservice/settings/",{method:"set",parameters:{category:"commercial",settings:{multiOffTimerHour:["0","0","0","0","0","0","0"],multiOffTimerMinute:["0","0","0","0","0","0","0"],multiOffTimerWeekday:["0","0","0","0","0","0","0"],offTimerCount:0,offTimerSchedule:[]}},onSuccess:function(){"function"==typeof e&&e()},onFailure:function(e){delete e.returnValue,"function"==typeof n&&(i(e,"PEAOT","Power.enableAllOffTimer returns failure. / clearOffTimer"),n(e))}}):"function"==typeof e&&e()},onFailure:function(e){delete e.returnValue,"function"==typeof n&&(i(e,"PEAOT","Power.enableAllOffTimer returns failure."),n(e))}})})},e.prototype.enableWakeOnLan=function(e,n,o){JSON.stringify(o);var r=null;switch(o.wakeOnLan){case!0:r="1";break;case!1:r="0";break;default:if("function"==typeof n){var u={};i(u,"PSWOL","Power.enableWakeOnLan returns failure. Invalid option value."),n(u)}return}t.Request("luna://com.webos.service.commercial.signage.storageservice/settings/",{method:"set",parameters:{category:"commercial",settings:{wolEnable:r}},onSuccess:function(){"function"==typeof e&&e()},onFailure:function(e){delete e.returnValue,"function"==typeof n&&(i(e,"PSWOL","Power.enableWakeOnLan returns failure."),n(e))}})},e.prototype.addOnTimer=function(e,n,o){JSON.stringify(o),s(function(r){if(4===r.webOSVer||r.webOSVer>4){if(void 0===o.hour||isNaN(o.hour)||"number"!=typeof o.hour||o.hour<0||o.hour>23||void 0===o.minute||isNaN(o.minute)||"number"!=typeof o.minute||o.minute<0||o.minute>59||void 0===o.week||isNaN(o.week)||"number"!=typeof o.week||o.week<=0||o.week>127)return void("function"==typeof n&&(i(u={},"PAOT","Power.addOnTimer returns failure. invalid parameters or out of range."),n(u)));t.Request("luna://com.webos.service.commercial.scapadapter/settings/",{method:"get",parameters:{category:"commercial",keys:["onOffTimeSchedule"]},onSuccess:function(r){if(!0===r.returnValue){for(var u=0,s={onTime:[],offTime:[]},f=[],m={},a=1;0!==o.week;){if(1&o.week)switch(console.log("AddonTimer - options.week - "+o.week),a){case 1:f.push("mon");break;case 2:f.push("tue");break;case 4:f.push("wed");break;case 8:f.push("thu");break;case 16:f.push("fri");break;case 32:f.push("sat");break;case 64:f.push("sun")}if(o.week=o.week>>>1,a<<=1,0===o.week)break}m.day=f,m.hour=o.hour,m.minute=o.minute,s.onTime.push(m),m={};var l=null===r.settings.onOffTimeSchedule.onTime||void 0===r.settings.onOffTimeSchedule.onTime?0:r.settings.onOffTimeSchedule.onTime.length;for(u=0;u<l;u++)void 0!==r.settings.onOffTimeSchedule.onTime[u].day&&null!==r.settings.onOffTimeSchedule.onTime[u].day&&(m.day=r.settings.onOffTimeSchedule.onTime[u].day),void 0!==r.settings.onOffTimeSchedule.onTime[u].hour&&null!==r.settings.onOffTimeSchedule.onTime[u].hour&&(m.hour=r.settings.onOffTimeSchedule.onTime[u].hour),void 0!==r.settings.onOffTimeSchedule.onTime[u].minute&&null!==r.settings.onOffTimeSchedule.onTime[u].minute&&(m.minute=r.settings.onOffTimeSchedule.onTime[u].minute),s.onTime.push(m),m={};var c=null===r.settings.onOffTimeSchedule.offTime||void 0===r.settings.onOffTimeSchedule.offTime?0:r.settings.onOffTimeSchedule.offTime.length;for(u=0;u<c;u++)void 0!==r.settings.onOffTimeSchedule.offTime[u].day&&null!==r.settings.onOffTimeSchedule.offTime[u].day&&(m.day=r.settings.onOffTimeSchedule.offTime[u].day),void 0!==r.settings.onOffTimeSchedule.offTime[u].hour&&null!==r.settings.onOffTimeSchedule.offTime[u].hour&&(m.hour=r.settings.onOffTimeSchedule.offTime[u].hour),void 0!==r.settings.onOffTimeSchedule.offTime[u].minute&&null!==r.settings.onOffTimeSchedule.offTime[u].minute&&(m.minute=r.settings.onOffTimeSchedule.offTime[u].minute),s.offTime.push(m),m={};t.Request("luna://com.webos.service.commercial.scapadapter/settings/",{method:"set",parameters:{category:"commercial",settings:{onOffTimeSchedule:s}},onSuccess:function(){"function"==typeof e&&e()},onFailure:function(e){delete e.returnValue,"function"==typeof n&&(i(e,"PAOT","Power.addOnTimer returns failure."),n(e))}})}},onFailure:function(e){delete e.returnValue,"function"==typeof n&&(i(e,"PAOT","Power.addOnTimer returns failure."),n(e))}})}else{var u;if(void 0===o.hour||isNaN(o.hour)||"number"!=typeof o.hour||o.hour<0||o.hour>23||void 0===o.minute||isNaN(o.minute)||"number"!=typeof o.minute||o.minute<0||o.minute>59||void 0===o.week||isNaN(o.week)||"number"!=typeof o.week||o.week<0||o.week>127||void 0===o.inputSource||"string"!=typeof o.inputSource||0!==o.inputSource.indexOf("ext://"))return void("function"==typeof n&&(i(u={},"PAOT","Power.addOnTimer returns failure. invalid parameters or out of range."),n(u)));t.Request("luna://com.webos.service.eim/",{method:"getAllInputStatus",onSuccess:function(u){if(!0===u.returnValue){for(var s=!1,f=0;f<u.totalCount;f++){var m=u.devices[f].deviceName.toLowerCase(),a=m,l=o.inputSource.substring(6).split(":"),c="1";if(!1===isNaN(m.substring(m.length-1,m.length))&&(m=m.substring(0,m.length-1),c=u.devices[f].id.split("_")[1]),"DISPLAYPORT"===m.toUpperCase()&&(m="DP"),m.toUpperCase().indexOf(l[0].toUpperCase())>=0&&c===l[1]){s=!0;break}}if(!1===s)return delete u.returnValue,void("function"==typeof n&&(i(u,"PAOT","Power.addOnTimer returns failure."),n(u)));t.Request("luna://com.webos.service.commercial.signage.storageservice/settings/",{method:"get",parameters:{category:"commercial",keys:["multiOnTimerHour","multiOnTimerMinute","multiOnTimerWeekday","multiOnTimerSource","onTimerSchedule","onTimerCount"]},onSuccess:function(u){if(!0===u.returnValue){r.webOSVer,"string"==typeof u.settings.multiOnTimerHour&&(u.settings.multiOnTimerHour=JSON.parse(u.settings.multiOnTimerHour)),"string"==typeof u.settings.multiOnTimerMinute&&(u.settings.multiOnTimerMinute=JSON.parse(u.settings.multiOnTimerMinute)),"string"==typeof u.settings.multiOnTimerWeekday&&(u.settings.multiOnTimerWeekday=JSON.parse(u.settings.multiOnTimerWeekday)),"string"==typeof u.settings.multiOnTimerSource&&(u.settings.multiOnTimerSource=JSON.parse(u.settings.multiOnTimerSource)),"string"==typeof u.settings.onTimerSchedule&&(u.settings.onTimerSchedule=JSON.parse(u.settings.onTimerSchedule));var s=null===u.settings.onTimerSchedule||void 0===u.settings.onTimerSchedule?0:u.settings.onTimerSchedule.length;if(u.settings.multiOnTimerHour.length<=s)return void("function"==typeof n&&(i(u,"PSOT","Power.addOnTimer returns failure. No space to add timer."),n(u)));3===r.webOSVer&&(o.week>=64?o.week=1+2*(o.week-64):o.week=2*o.week),u.settings.multiOnTimerHour[s]=o.hour,u.settings.multiOnTimerMinute[s]=o.minute,u.settings.multiOnTimerWeekday[s]=o.week,u.settings.multiOnTimerSource[s]=a.toUpperCase();var f=360;u.settings.onTimerSchedule[s]={_id:""+f++,hour:o.hour,input:a.toUpperCase(),minute:o.minute,weekday:o.week},t.Request("luna://com.webos.service.commercial.signage.storageservice/settings/",{method:"set",parameters:{category:"commercial",settings:{multiOnTimerHour:u.settings.multiOnTimerHour,multiOnTimerMinute:u.settings.multiOnTimerMinute,multiOnTimerWeekday:u.settings.multiOnTimerWeekday,multiOnTimerSource:u.settings.multiOnTimerSource,onTimerCount:s+1,onTimerSchedule:u.settings.onTimerSchedule}},onSuccess:function(){"function"==typeof e&&e()},onFailure:function(e){delete e.returnValue,"function"==typeof n&&(i(e,"PAOT","Power.addOnTimer returns failure."),n(e))}})}},onFailure:function(e){delete e.returnValue,"function"==typeof n&&(i(e,"PAOT","Power.addOnTimer returns failure."),n(e))}})}},onFailure:function(e){delete e.returnValue,"function"==typeof n&&(i(e,"PAOT","Power.addOnTimer returns failure on gathering input list."),n(e))}})}})},e.prototype.deleteOnTimer=function(e,n,r){JSON.stringify(r),s(function(f){if(4===f.webOSVer||f.webOSVer>4){if(void 0===r.hour||isNaN(r.hour)||"number"!=typeof r.hour||r.hour<0||r.hour>23||void 0===r.minute||isNaN(r.minute)||"number"!=typeof r.minute||r.minute<0||r.minute>59||void 0===r.week||isNaN(r.week)||"number"!=typeof r.week||r.week<0||r.week>127)return void("function"==typeof n&&(i(m={},"PAOT","Power.deleteOnTimer returns failure. invalid parameters or out of range."),n(m)));t.Request("luna://com.webos.service.commercial.scapadapter/settings/",{method:"get",parameters:{category:"commercial",keys:["onOffTimeSchedule"]},onSuccess:function(u){if(!0===u.returnValue){for(var s=0,f={onTime:[],offTime:[]},m=[],a={},l={},c=1;0!==r.week;){if(1&r.week)switch(c){case 1:m.push("mon");break;case 2:m.push("tue");break;case 4:m.push("wed");break;case 8:m.push("thu");break;case 16:m.push("fri");break;case 32:m.push("sat");break;case 64:m.push("sun")}if(r.week=r.week>>>1,c<<=1,0===r.week)break}c=0,a.day=m,a.hour=r.hour,a.minute=r.minute;var d=null===u.settings.onOffTimeSchedule.onTime||void 0===u.settings.onOffTimeSchedule.onTime?0:u.settings.onOffTimeSchedule.onTime.length,T=!1;for(s=0;s<d;s++)void 0!==u.settings.onOffTimeSchedule.onTime[s].day&&null!==u.settings.onOffTimeSchedule.onTime[s].day&&(o(u.settings.onOffTimeSchedule.onTime[s].day,a.day)?c++:l.day=u.settings.onOffTimeSchedule.onTime[s].day),void 0!==u.settings.onOffTimeSchedule.onTime[s].hour&&null!==u.settings.onOffTimeSchedule.onTime[s].hour&&(u.settings.onOffTimeSchedule.onTime[s].hour===a.hour?c++:l.hour=u.settings.onOffTimeSchedule.onTime[s].hour),void 0!==u.settings.onOffTimeSchedule.onTime[s].minute&&null!==u.settings.onOffTimeSchedule.onTime[s].minute&&(u.settings.onOffTimeSchedule.onTime[s].minute===a.minute?c++:l.minute=u.settings.onOffTimeSchedule.onTime[s].minute),3!==c?f.onTime.push(l):T=!0,c=0,l={};var g=null===u.settings.onOffTimeSchedule.offTime||void 0===u.settings.onOffTimeSchedule.offTime?0:u.settings.onOffTimeSchedule.offTime.length;for(s=0;s<g;s++)void 0!==u.settings.onOffTimeSchedule.offTime[s].day&&null!==u.settings.onOffTimeSchedule.offTime[s].day&&(l.day=u.settings.onOffTimeSchedule.offTime[s].day),void 0!==u.settings.onOffTimeSchedule.offTime[s].hour&&null!==u.settings.onOffTimeSchedule.offTime[s].hour&&(l.hour=u.settings.onOffTimeSchedule.offTime[s].hour),void 0!==u.settings.onOffTimeSchedule.offTime[s].minute&&null!==u.settings.onOffTimeSchedule.offTime[s].minute&&(l.minute=u.settings.onOffTimeSchedule.offTime[s].minute),f.offTime.push(l),l={};T?t.Request("luna://com.webos.service.commercial.scapadapter/settings/",{method:"set",parameters:{category:"commercial",settings:{onOffTimeSchedule:f}},onSuccess:function(){"function"==typeof e&&e()},onFailure:function(e){delete e.returnValue,"function"==typeof n&&(i(e,"PAOT","Power.deleteOnTimer returns failure."),n(e))}}):(i(u={},"PAOT","Power.deleteOnTimer returns failure. / No matched found"),n(u))}},onFailure:function(e){delete e.returnValue,"function"==typeof n&&(i(e,"PAOT","Power.deleteOnTimer returns failure."),n(e))}})}else{var m;if(void 0===r.hour||isNaN(r.hour)||"number"!=typeof r.hour||r.hour<0||r.hour>23||void 0===r.minute||isNaN(r.minute)||"number"!=typeof r.minute||r.minute<0||r.minute>59||void 0===r.week||isNaN(r.week)||"number"!=typeof r.week||r.week<0||r.week>127||void 0===r.inputSource||"string"!=typeof r.inputSource||0!==r.inputSource.indexOf("ext://"))return void("function"==typeof n&&(i(m={},"PDOT","Power.deleteOnTimer returns failure. invalid parameters or out of range."),n(m)));t.Request("luna://com.webos.service.commercial.signage.storageservice/settings/",{method:"get",parameters:{category:"commercial",keys:["multiOnTimerHour","multiOnTimerMinute","multiOnTimerWeekday","multiOnTimerSource","onTimerSchedule","onTimerCount"]},onSuccess:function(o){!0===o.returnValue&&s(function(s){t.Request("luna://com.webos.service.eim/",{method:"getAllInputStatus",onSuccess:function(f){if(!0===o.returnValue){s.webOSVer,"string"==typeof o.settings.multiOnTimerHour&&(o.settings.multiOnTimerHour=JSON.parse(o.settings.multiOnTimerHour)),"string"==typeof o.settings.multiOnTimerMinute&&(o.settings.multiOnTimerMinute=JSON.parse(o.settings.multiOnTimerMinute)),"string"==typeof o.settings.multiOnTimerWeekday&&(o.settings.multiOnTimerWeekday=JSON.parse(o.settings.multiOnTimerWeekday)),"string"==typeof o.settings.multiOnTimerSource&&(o.settings.multiOnTimerSource=JSON.parse(o.settings.multiOnTimerSource)),"string"==typeof o.settings.onTimerSchedule&&(o.settings.onTimerSchedule=JSON.parse(o.settings.onTimerSchedule));for(var m=0,a=null===o.settings.onTimerSchedule||void 0===o.settings.onTimerSchedule?0:o.settings.onTimerSchedule.length,l=["0","0","0","0","0","0","0"],c=["0","0","0","0","0","0","0"],d=["0","0","0","0","0","0","0"],T=["0","0","0","0","0","0","0"],g=[],h=function(e){if("H15"==u.chipset)switch(e){case"ext://hdmi:1":return"HDMI1";case"ext://hdmi:2":return"HDMI2";case"ext://hdmi:3":case"ext://dvi:1":return"OPS/HDMI3/DVI";case"ext://dp:1":return"DISPLAYPORT";case"ext://rgb:1":return"RGB";case"ext://ops:1":return"OPS/HDMI3/DVI";case"HDMI1":return"ext://hdmi:1";case"HDMI2":return"ext://hdmi:2";case"HDMI3":return"ext://hdmi:3";case"DVI":return"ext://dvi:1";case"DISPLAYPORT":return"ext://dp:1";case"RGB":return"ext://rgb:1";case"OPS":return"ext://ops:1";case"OPS/HDMI3/DVI":return"ext://hdmi:3"}else switch(e){case"ext://hdmi:1":return"HDMI1";case"ext://hdmi:2":return"HDMI2";case"ext://hdmi:3":return"HDMI3";case"ext://dvi:1":return"DVI";case"ext://dp:1":return"DISPLAYPORT";case"ext://rgb:1":return"RGB";case"ext://ops:1":return"OPS";case"HDMI1":case"HDMI":return"ext://hdmi:1";case"HDMI2":return"ext://hdmi:2";case"HDMI3":return"ext://hdmi:3";case"DVI":return"ext://dvi:1";case"DISPLAYPORT":return"ext://dp:1";case"RGB":return"ext://rgb:1";case"OPS":return"ext://ops:1";case"OPS/HDMI3/DVI":return"ext://hdmi:3"}return null}(r.inputSource),O=0;O<f.totalCount;O++){var p=f.devices[O].deviceName,S=p,y=r.inputSource.substring(6).split(":"),w="1";if(!1===isNaN(p.substring(p.length-1,p.length))&&(p=p.substring(0,p.length-1),w=f.devices[O].id.split("_")[1]),"DISPLAYPORT"===p.toUpperCase()&&(p="DP"),p.toUpperCase().indexOf(y[0].toUpperCase())>=0&&w===y[1]){h=S;break}}var v=!1;for(3===s.webOSVer&&(r.week>=64?r.week=1+2*(r.week-64):r.week=2*r.week),O=0;O<a;O++)null!==o.settings.onTimerSchedule[O]&&(r.week,o.settings.onTimerSchedule[O].weekday,!1===v&&r.hour===o.settings.onTimerSchedule[O].hour&&r.minute===o.settings.onTimerSchedule[O].minute&&r.week==o.settings.onTimerSchedule[O].weekday&&o.settings.onTimerSchedule[O].input.toUpperCase()===h.toUpperCase()?v=!0:(l[m]=o.settings.multiOnTimerHour[O],c[m]=o.settings.multiOnTimerMinute[O],d[m]=o.settings.multiOnTimerWeekday[O],T[m]=o.settings.multiOnTimerSource[O],g[m]=o.settings.onTimerSchedule[O],m++));if(!0===v&&a--,0===a&&(g=[]),o.settings.onTimerSchedule.length===a)return void("function"==typeof n&&(i(o,"PDOT","Power.deleteOnTimer returns failure. There is no 'on timer' matched in the list."),n(o)));t.Request("luna://com.webos.service.commercial.signage.storageservice/settings/",{method:"set",parameters:{category:"commercial",settings:{multiOnTimerHour:l,multiOnTimerMinute:c,multiOnTimerWeekday:d,multiOnTimerSource:T,onTimerCount:a,onTimerSchedule:g}},onSuccess:function(){"function"==typeof e&&e()},onFailure:function(e){delete e.returnValue,"function"==typeof n&&(i(e,"PDOT","Power.deleteOnTimer returns failure."),n(e))}})}},onFailure:function(e){delete e.returnValue,"function"==typeof n&&(i(e,"PDOT","Power.deleteOnTimer returns failure"),n(e))}})})},onFailure:function(e){delete e.returnValue,"function"==typeof n&&(i(e,"PDOT","Power.deleteOnTimer returns failure."),n(e))}})}})},e.prototype.addOffTimer=function(e,n,o){if(JSON.stringify(o),void 0===o.hour||isNaN(o.hour)||"number"!=typeof o.hour||o.hour<0||o.hour>23||void 0===o.minute||isNaN(o.minute)||"number"!=typeof o.minute||o.minute<0||o.minute>59||void 0===o.week||isNaN(o.week)||"number"!=typeof o.week||o.week<=0||o.week>127){if("function"==typeof n){var r={};i(r,"PAOT","Power.addOffTimer returns failure. Invalid parameter."),n(r)}}else s(function(r){4===r.webOSVer||r.webOSVer>4?t.Request("luna://com.webos.service.commercial.scapadapter/settings/",{method:"get",parameters:{category:"commercial",keys:["onOffTimeSchedule"]},onSuccess:function(r){if(!0===r.returnValue){for(var u=0,s={onTime:[],offTime:[]},f=[],m={},a=1;0!==o.week;){if(1&o.week)switch(a){case 1:f.push("mon");break;case 2:f.push("tue");break;case 4:f.push("wed");break;case 8:f.push("thu");break;case 16:f.push("fri");break;case 32:f.push("sat");break;case 64:f.push("sun")}if(o.week=o.week>>>1,a<<=1,0===o.week)break}m.day=f,m.hour=o.hour,m.minute=o.minute,s.offTime.push(m),m={};var l=null===r.settings.onOffTimeSchedule.onTime||void 0===r.settings.onOffTimeSchedule.onTime?0:r.settings.onOffTimeSchedule.onTime.length;for(u=0;u<l;u++)void 0!==r.settings.onOffTimeSchedule.onTime[u].day&&null!==r.settings.onOffTimeSchedule.onTime[u].day&&(m.day=r.settings.onOffTimeSchedule.onTime[u].day),void 0!==r.settings.onOffTimeSchedule.onTime[u].hour&&null!==r.settings.onOffTimeSchedule.onTime[u].hour&&(m.hour=r.settings.onOffTimeSchedule.onTime[u].hour),void 0!==r.settings.onOffTimeSchedule.onTime[u].minute&&null!==r.settings.onOffTimeSchedule.onTime[u].minute&&(m.minute=r.settings.onOffTimeSchedule.onTime[u].minute),s.onTime.push(m),m={};var c=null===r.settings.onOffTimeSchedule.offTime||void 0===r.settings.onOffTimeSchedule.offTime?0:r.settings.onOffTimeSchedule.offTime.length;for(u=0;u<c;u++)void 0!==r.settings.onOffTimeSchedule.offTime[u].day&&null!==r.settings.onOffTimeSchedule.offTime[u].day&&(m.day=r.settings.onOffTimeSchedule.offTime[u].day),void 0!==r.settings.onOffTimeSchedule.offTime[u].hour&&null!==r.settings.onOffTimeSchedule.offTime[u].hour&&(m.hour=r.settings.onOffTimeSchedule.offTime[u].hour),void 0!==r.settings.onOffTimeSchedule.offTime[u].minute&&null!==r.settings.onOffTimeSchedule.offTime[u].minute&&(m.minute=r.settings.onOffTimeSchedule.offTime[u].minute),s.offTime.push(m),m={};t.Request("luna://com.webos.service.commercial.scapadapter/settings/",{method:"set",parameters:{category:"commercial",settings:{onOffTimeSchedule:s}},onSuccess:function(){"function"==typeof e&&e()},onFailure:function(e){delete e.returnValue,"function"==typeof n&&(i(e,"PAOT","Power.addOffTimer returns failure."),n(e))}})}},onFailure:function(e){delete e.returnValue,"function"==typeof n&&(i(e,"PAOT","Power.addOffTimer returns failure."),n(e))}}):t.Request("luna://com.webos.service.commercial.signage.storageservice/settings/",{method:"get",parameters:{category:"commercial",keys:["multiOffTimerHour","multiOffTimerMinute","multiOffTimerWeekday","offTimerSchedule","offTimerCount"]},onSuccess:function(r){if(!0===r.returnValue){"string"==typeof r.settings.multiOffTimerHour&&(r.settings.multiOffTimerHour=JSON.parse(r.settings.multiOffTimerHour)),"string"==typeof r.settings.multiOffTimerMinute&&(r.settings.multiOffTimerMinute=JSON.parse(r.settings.multiOffTimerMinute)),"string"==typeof r.settings.multiOffTimerWeekday&&(r.settings.multiOffTimerWeekday=JSON.parse(r.settings.multiOffTimerWeekday)),"string"==typeof r.settings.offTimerSchedule&&(r.settings.offTimerSchedule=JSON.parse(r.settings.offTimerSchedule));var u=null===r.settings.offTimerSchedule||void 0===r.settings.offTimerSchedule?0:r.settings.offTimerSchedule.length;if(r.settings.multiOffTimerHour.length<=u)return void("function"==typeof n&&(i(r,"PAOT","Power.addOffTimer returns failure. No space to add timer."),n(r)));s(function(s){s.webOSVer,3===s.webOSVer&&(o.week>=64?o.week=1+2*(o.week-64):o.week=2*o.week),r.settings.multiOffTimerHour[u]=o.hour,r.settings.multiOffTimerMinute[u]=o.minute,r.settings.multiOffTimerWeekday[u]=o.week,o.hour,o.minute,o.week;var f=360;r.settings.offTimerSchedule[u]={_id:""+f++,hour:o.hour,minute:o.minute,weekday:o.week},t.Request("luna://com.webos.service.commercial.signage.storageservice/settings/",{method:"set",parameters:{category:"commercial",settings:{multiOffTimerHour:r.settings.multiOffTimerHour,multiOffTimerMinute:r.settings.multiOffTimerMinute,multiOffTimerWeekday:r.settings.multiOffTimerWeekday,offTimerCount:u+1,offTimerSchedule:r.settings.offTimerSchedule}},onSuccess:function(){"function"==typeof e&&e()},onFailure:function(e){delete e.returnValue,"function"==typeof n&&(i(e,"PAOT","Power.addOffTimer returns failure."),n(e))}})})}},onFailure:function(e){delete e.returnValue,"function"==typeof n&&(i(e,"PAOT","Power.addOffTimer returns failure."),n(e))}})})},e.prototype.deleteOffTimer=function(e,n,r){JSON.stringify(r),s(function(u){if(4===u.webOSVer||u.webOSVer>4){if(void 0===r.hour||isNaN(r.hour)||"number"!=typeof r.hour||r.hour<0||r.hour>23||void 0===r.minute||isNaN(r.minute)||"number"!=typeof r.minute||r.minute<0||r.minute>59||void 0===r.week||isNaN(r.week)||"number"!=typeof r.week||r.week<0||r.week>127)return void("function"==typeof n&&(i(f={},"PAOT","Power.deleteOffTimer returns failure. invalid parameters or out of range."),n(f)));t.Request("luna://com.webos.service.commercial.scapadapter/settings/",{method:"get",parameters:{category:"commercial",keys:["onOffTimeSchedule"]},onSuccess:function(u){if(!0===u.returnValue){for(var s=0,f={onTime:[],offTime:[]},m=[],a={},l={},c=1;0!==r.week;){if(1&r.week)switch(c){case 1:m.push("mon");break;case 2:m.push("tue");break;case 4:m.push("wed");break;case 8:m.push("thu");break;case 16:m.push("fri");break;case 32:m.push("sat");break;case 64:m.push("sun")}if(r.week=r.week>>>1,c<<=1,0===r.week)break}c=0,a.day=m,a.hour=r.hour,a.minute=r.minute;var d=null===u.settings.onOffTimeSchedule.onTime||void 0===u.settings.onOffTimeSchedule.onTime?0:u.settings.onOffTimeSchedule.onTime.length,T=!1;for(s=0;s<d;s++)void 0!==u.settings.onOffTimeSchedule.onTime[s].day&&null!==u.settings.onOffTimeSchedule.onTime[s].day&&(l.day=u.settings.onOffTimeSchedule.onTime[s].day),void 0!==u.settings.onOffTimeSchedule.onTime[s].hour&&null!==u.settings.onOffTimeSchedule.onTime[s].hour&&(l.hour=u.settings.onOffTimeSchedule.onTime[s].hour),void 0!==u.settings.onOffTimeSchedule.onTime[s].minute&&null!==u.settings.onOffTimeSchedule.onTime[s].minute&&(l.minute=u.settings.onOffTimeSchedule.onTime[s].minute),f.onTime.push(l),l={};var g=null===u.settings.onOffTimeSchedule.offTime||void 0===u.settings.onOffTimeSchedule.offTime?0:u.settings.onOffTimeSchedule.offTime.length;for(s=0;s<g;s++)void 0!==u.settings.onOffTimeSchedule.offTime[s].day&&null!==u.settings.onOffTimeSchedule.offTime[s].day&&(o(u.settings.onOffTimeSchedule.offTime[s].day,a.day)?c++:l.day=u.settings.onOffTimeSchedule.offTime[s].day),void 0!==u.settings.onOffTimeSchedule.offTime[s].hour&&null!==u.settings.onOffTimeSchedule.offTime[s].hour&&(u.settings.onOffTimeSchedule.offTime[s].hour===a.hour?c++:l.hour=u.settings.onOffTimeSchedule.offTime[s].hour),void 0!==u.settings.onOffTimeSchedule.offTime[s].minute&&null!==u.settings.onOffTimeSchedule.offTime[s].minute&&(u.settings.onOffTimeSchedule.offTime[s].minute===a.minute?c++:l.minute=u.settings.onOffTimeSchedule.offTime[s].minute),3!==c?f.offTime.push(l):T=!0,c=0,l={};T?t.Request("luna://com.webos.service.commercial.scapadapter/settings/",{method:"set",parameters:{category:"commercial",settings:{onOffTimeSchedule:f}},onSuccess:function(){"function"==typeof e&&e()},onFailure:function(e){delete e.returnValue,"function"==typeof n&&(i(e,"PAOT","Power.deleteOffTimer returns failure."),n(e))}}):(i(u={},"PAOT","Power.deleteOffTimer returns failure. / No matched found."),n(u))}},onFailure:function(e){delete e.returnValue,"function"==typeof n&&(i(e,"PAOT","Power.deleteOffTimer returns failure."),n(e))}})}else{var f;if(void 0===r.hour||isNaN(r.hour)||"number"!=typeof r.hour||r.hour<0||r.hour>23||void 0===r.minute||isNaN(r.minute)||"number"!=typeof r.minute||r.minute<0||r.minute>59||void 0===r.week||isNaN(r.week)||"number"!=typeof r.week||r.week<0||r.week>127)return void("function"==typeof n&&(i(f={},"PDOT","Power.deleteOffTimer returns failure. invalid parameters or out of range."),n(f)));t.Request("luna://com.webos.service.commercial.signage.storageservice/settings/",{method:"get",parameters:{category:"commercial",keys:["multiOffTimerHour","multiOffTimerMinute","multiOffTimerWeekday","offTimerSchedule","offTimerCount"]},onSuccess:function(o){if(!0===o.returnValue){"string"==typeof o.settings.multiOffTimerHour&&(o.settings.multiOffTimerHour=JSON.parse(o.settings.multiOffTimerHour)),"string"==typeof o.settings.multiOffTimerMinute&&(o.settings.multiOffTimerMinute=JSON.parse(o.settings.multiOffTimerMinute)),"string"==typeof o.settings.multiOffTimerWeekday&&(o.settings.multiOffTimerWeekday=JSON.parse(o.settings.multiOffTimerWeekday)),"string"==typeof o.settings.offTimerSchedule&&(o.settings.offTimerSchedule=JSON.parse(o.settings.offTimerSchedule));var u=0,f=null===o.settings.offTimerSchedule||void 0===o.settings.offTimerSchedule?0:o.settings.offTimerSchedule.length,m=["0","0","0","0","0","0","0"],a=["0","0","0","0","0","0","0"],l=["0","0","0","0","0","0","0"],c=[],d=!1;s(function(e){e.webOSVer,3===e.webOSVer&&(r.week>=64?r.week=1+2*(r.week-64):r.week=2*r.week)});for(var T=0;T<f;T++)null!==o.settings.offTimerSchedule[T]&&(r.week,o.settings.offTimerSchedule[T].weekday,!1===d&&r.hour===o.settings.offTimerSchedule[T].hour&&r.minute===o.settings.offTimerSchedule[T].minute&&r.week===o.settings.offTimerSchedule[T].weekday?d=!0:(m[u]=o.settings.multiOffTimerHour[T],a[u]=o.settings.multiOffTimerMinute[T],l[u]=o.settings.multiOffTimerWeekday[T],c[u]=o.settings.offTimerSchedule[T],u++));if(!0===d&&f--,0===f&&(c=[]),o.settings.offTimerSchedule.length===f)return void("function"==typeof n&&(i(o,"PDOT","Power.deleteOffTimer returns failure. There is no 'off timer' matched in the list."),n(o)));t.Request("luna://com.webos.service.commercial.signage.storageservice/settings/",{method:"set",parameters:{category:"commercial",settings:{multiOffTimerHour:m,multiOffTimerMinute:a,multiOffTimerWeekday:l,offTimerCount:f,offTimerSchedule:c}},onSuccess:function(){"function"==typeof e&&e()},onFailure:function(e){delete e.returnValue,"function"==typeof n&&(i(e,"PDOT","Power.deleteOffTimer returns failure."),n(e))}})}},onFailure:function(e){delete e.returnValue,"function"==typeof n&&(i(e,"PDOT","Power.deleteOffTimer returns failure."),n(e))}})}})},e.prototype.getOnTimerList=function(e,n){s(function(o){4===o.webOSVer||o.webOSVer>4?t.Request("luna://com.webos.service.commercial.scapadapter/settings/",{method:"get",parameters:{category:"commercial",keys:["onOffTimeSchedule"]},onSuccess:function(t){if(!0===t.returnValue){for(var n={},i=new Array(null===t.settings.onOffTimeSchedule.onTime||void 0===t.settings.onOffTimeSchedule.onTime?0:t.settings.onOffTimeSchedule.onTime.length),o=0,r=0;r<i.length;r++,o++)if(null!==t.settings.onOffTimeSchedule.onTime[r]&&void 0!==t.settings.onOffTimeSchedule.onTime[r]){i[o]={hour:0,minute:0,week:0};for(var u=t.settings.onOffTimeSchedule.onTime[r].day,s=0,f=0;f<u.length;f++)"mon"===u[f]&&(s+=1),"tue"===u[f]&&(s+=2),"wed"===u[f]&&(s+=4),"thu"===u[f]&&(s+=8),"fri"===u[f]&&(s+=16),"sat"===u[f]&&(s+=32),"sun"===u[f]&&(s+=64);i[o].hour=t.settings.onOffTimeSchedule.onTime[r].hour,i[o].minute=t.settings.onOffTimeSchedule.onTime[r].minute,i[o].week=s}n.timerList=i,"function"==typeof e&&e(n)}},onFailure:function(e){delete e.returnValue,"function"==typeof n&&(i(e,"PGOTL","Power.getOnTimerList returns failure."),n(e))}}):t.Request("luna://com.webos.service.commercial.signage.storageservice/settings/",{method:"get",parameters:{category:"commercial",keys:["onTimerSchedule"]},onSuccess:function(t){!0===t.returnValue&&s(function(n){n.webOSVer;var i={};"string"==typeof t.settings.onTimerSchedule&&(t.settings.onTimerSchedule=JSON.parse(t.settings.onTimerSchedule));for(var o=new Array(null===t.settings.onTimerSchedule||void 0===t.settings.onTimerSchedule?0:t.settings.onTimerSchedule.length),r=0,u=0;u<o.length;u++)if(null!==t.settings.onTimerSchedule[u]&&void 0!==t.settings.onTimerSchedule[u]){if(o[r]={hour:0,minute:0,week:0,inputSource:0},3===n.webOSVer){var s=t.settings.onTimerSchedule[u].weekday;s%2?s=64+(s-s%2)/2:s/=2}else s=t.settings.onTimerSchedule[u].weekday;o[r].hour=t.settings.onTimerSchedule[u].hour,o[r].minute=t.settings.onTimerSchedule[u].minute,o[r].week=s;var f="ext://",m=t.settings.onTimerSchedule[u].input.toUpperCase(),a="1";!1===isNaN(m.substring(m.length-1,m.length))&&(a=m.substring(m.length-1,m.length),m=m.substring(0,m.length-1)),f="DISPLAYPORT"===(m=m.split("/")[0]).toUpperCase()?f+"dp:"+a:f+m.toLowerCase()+":"+a,o[r++].inputSource=f}i.timerList=o,"function"==typeof e&&e(i)})},onFailure:function(e){delete e.returnValue,"function"==typeof n&&(i(e,"PGOTL","Power.getOnTimerList returns failure."),n(e))}})})},e.prototype.getOffTimerList=function(e,n){s(function(o){4===o.webOSVer||o.webOSVer>4?t.Request("luna://com.webos.service.commercial.scapadapter/settings/",{method:"get",parameters:{category:"commercial",keys:["onOffTimeSchedule"]},onSuccess:function(t){if(!0===t.returnValue){for(var n={},i=new Array(null===t.settings.onOffTimeSchedule.offTime||void 0===t.settings.onOffTimeSchedule.offTime?0:t.settings.onOffTimeSchedule.offTime.length),o=0,r=0;r<i.length;r++,o++)if(null!==t.settings.onOffTimeSchedule.offTime[r]&&void 0!==t.settings.onOffTimeSchedule.offTime[r]){i[o]={hour:0,minute:0,week:0};for(var u=t.settings.onOffTimeSchedule.offTime[r].day,s=0,f=0;f<u.length;f++)"mon"===u[f]&&(s+=1),"tue"===u[f]&&(s+=2),"wed"===u[f]&&(s+=4),"thu"===u[f]&&(s+=8),"fri"===u[f]&&(s+=16),"sat"===u[f]&&(s+=32),"sun"===u[f]&&(s+=64);i[o].hour=t.settings.onOffTimeSchedule.offTime[r].hour,i[o].minute=t.settings.onOffTimeSchedule.offTime[r].minute,i[o].week=s}n.timerList=i,"function"==typeof e&&e(n)}},onFailure:function(e){delete e.returnValue,"function"==typeof n&&(i(e,"PGOTL","Power.getOffTimerList returns failure."),n(e))}}):t.Request("luna://com.webos.service.commercial.signage.storageservice/settings/",{method:"get",parameters:{category:"commercial",keys:["offTimerSchedule"]},onSuccess:function(t){s(function(n){if(n.webOSVer,!0===t.returnValue){var i={};"string"==typeof t.settings.offTimerSchedule&&(t.settings.offTimerSchedule=JSON.parse(t.settings.offTimerSchedule));for(var o=new Array(null===t.settings.offTimerSchedule||void 0===t.settings.offTimerSchedule?0:t.settings.offTimerSchedule.length),r=0,u=0;u<o.length;u++)if(null!==t.settings.offTimerSchedule[u]&&void 0!==t.settings.offTimerSchedule[u]){if(o[r]={hour:0,minute:0,week:0},3===n.webOSVer){var s=t.settings.offTimerSchedule[u].weekday;s%2?s=64+(s-s%2)/2:s/=2}else s=t.settings.offTimerSchedule[u].weekday;o[r].hour=t.settings.offTimerSchedule[u].hour,o[r].minute=t.settings.offTimerSchedule[u].minute,o[r++].week=s}i.timerList=o,"function"==typeof e&&e(i)}})},onFailure:function(e){delete e.returnValue,"function"==typeof n&&(i(e,"PGOTL","Power.getOffTimerList returns failure."),n(e))}})})},e.prototype.setDisplayMode=function(n,o,r){JSON.stringify(r),s(function(u){if(4===u.webOSVer||u.webOSVer>4)t.Request("luna://com.webos.service.commercial.scapadapter/power",{method:"setDisplayMode",parameters:{displayMode:r.displayMode},onSuccess:function(e){!0===e.returnValue&&(delete e.returnValue,"function"==typeof n&&n())},onFailure:function(e){delete e.returnValue,"function"==typeof o&&(i(e,"PSDM","Power.setDisplayMode returns failure."),o(e))}});else{var s=null;switch(r.displayMode){case e.DisplayMode.DISPLAY_OFF:s="turnOffScreen";break;case e.DisplayMode.DISPLAY_ON:s="turnOnScreen";break;default:var f;return void("function"==typeof o&&(i(f={},"PSDM","Power.setDisplayMode returns failure. Invalid option value."),o(f)))}if(null===s&&"function"==typeof o)return i(f={},"PSDM","Power.setDisplayMode returns failure. command was not defined."),void o(f);t.Request("luna://com.webos.service.tv.signage/",{method:"getPowerState",onSuccess:function(e){!0!==e.returnValue||e.state!==r.displayMode?t.Request("luna://com.webos.service.tv.signage/",{method:s,onSuccess:function(e){!0===e.returnValue&&"function"==typeof n&&n()},onFailure:function(e){delete e.returnValue,"function"==typeof o&&(i(e,"PSDM","Power.setDisplayMode returns failure."),o(e))}}):"function"==typeof n&&n()},onFailure:function(e){delete e.returnValue,"function"==typeof o&&(i(e,"PSDM","Power.setDisplayMode returns failure."),o(e))}})}})},e.prototype.executePowerCommand=function(n,o,r){JSON.stringify(r),s(function(u){if(4===u.webOSVer||u.webOSVer>4)t.Request("luna://com.webos.service.commercial.scapadapter/power",{method:"executePowerCommand",parameters:{powerCommand:r.powerCommand},onSuccess:function(e){delete e.returnValue,"function"==typeof n&&n()},onFailure:function(e){delete e.returnValue,"function"==typeof o&&(i(e,"PEPM","Power.executePowerCommand returns failure."),o(e))}});else{if(void 0===r.powerCommand||"string"!=typeof r.powerCommand||null===r.powerCommand||r.powerCommand.length<=0)return void("function"==typeof o&&(i(s={},"PEPM","Power.executePowerCommand returns failure. invalid argument or out of range. "),o(s)));var s;if(r.powerCommand!==e.PowerCommand.REBOOT&&r.powerCommand!==e.PowerCommand.SHUTDOWN)return i(s={},"PEPM","Power.executePowerCommand returns failure. invalid argument."),void o(s);t.Request("luna://com.webos.service.tv.signage/",{method:r.powerCommand,parameters:{reason:"unknown"},onSuccess:function(e){!0===e.returnValue&&"function"==typeof n&&n()},onFailure:function(e){delete e.returnValue,"function"==typeof o&&(i(e,"PEPM","Power.executePowerCommand returns failure."),o(e))}})}})},e.prototype.setDPMWakeup=function(n,o,r){var u=null;switch(r.dpmSignalType){case e.DPMSignalType.CLOCK:u="clock";break;case e.DPMSignalType.CLOCK_WITH_DATA:u="clockAndData"}if(null===u&&"function"==typeof o){var s={};return i(s,"PSDW","Power.setDPMWakeup returns failure. command was not defined."),void o(s)}t.Request("luna://com.webos.service.commercial.signage.storageservice/settings/",{method:"set",parameters:{category:"commercial",settings:{dpmWakeUpControl:u}},onSuccess:function(e){!0===e.returnValue&&"function"==typeof n&&n()},onFailure:function(e){delete e.returnValue,"function"==typeof o&&(i(e,"PSDW","Power.setDPMWakeup returns failure."),o(e))}})},e.prototype.getDPMWakeup=function(e,n){t.Request("luna://com.webos.service.commercial.signage.storageservice/settings/",{method:"get",parameters:{category:"commercial",keys:["dpmWakeUpControl"]},onSuccess:function(t){if(!0===t.returnValue){var n={};n.dpmSignalType=t.settings.dpmWakeUpControl,"function"==typeof e&&e(n)}},onFailure:function(e){delete e.returnValue,"function"==typeof n&&(i(e,"PGDW","Power.getDPMWakeup returns failure."),n(e))}})},e.prototype.setPMMode=function(n,o,r){var u=null;switch(r.mode){case e.PMMode.PowerOff:u="powerOff";break;case e.PMMode.SustainAspectRatio:u="sustainAspectRatio";break;case e.PMMode.ScreenOff:u="screenOff";break;case e.PMMode.ScreenOffAlways:u="screenOffAlways";break;case e.PMMode.ScreenOffBacklight:u="screenOffBacklight"}if(null===u&&"function"==typeof o){var s={};return i(s,"PSPM","Power.setPMMode returns failure. command was not defined."),void o(s)}t.Request("luna://com.webos.service.commercial.signage.storageservice/settings/",{method:"set",parameters:{category:"commercial",settings:{pmMode:u}},onSuccess:function(e){!0===e.returnValue&&"function"==typeof n&&n()},onFailure:function(e){delete e.returnValue,"function"==typeof o&&(i(e,"PSPM","Power.setPMMode returns failure."),o(e))}})},e.prototype.getPMMode=function(e,n){t.Request("luna://com.webos.service.commercial.signage.storageservice/settings/",{method:"get",parameters:{category:"commercial",keys:["pmMode"]},onSuccess:function(t){if(!0===t.returnValue){var n={};n.mode=t.settings.pmMode,"function"==typeof e&&e(n)}},onFailure:function(e){delete e.returnValue,"function"==typeof n&&(i(e,"PGPM","Power.getPMMode returns failure."),n(e))}})},e.prototype.setPowerOnDelay=function(e,n,o){var r;return o.delayTime,null===o.delayTime&&"function"==typeof n?(i(r={},"PSPD","Power.setPowerOnDelay returns failure. command was not defined."),void n(r)):"number"!=typeof o.delayTime?(i(r={},"PSPD","Power.setPowerOnDelay returns failure. delayTime is not a number."),void n(r)):o.delayTime<0||o.delayTime>250?(i(r={},"PSPD","Power.setPowerOnDelay returns failure. Out of range."),void n(r)):void t.Request("luna://com.webos.service.commercial.signage.storageservice/settings/",{method:"set",parameters:{category:"commercial",settings:{powerOnDelay:o.delayTime}},onSuccess:function(t){!0===t.returnValue&&"function"==typeof e&&e()},onFailure:function(e){delete e.returnValue,"function"==typeof n&&(i(e,"PSPD","Power.setPowerOnDelay returns failure."),n(e))}})},e.prototype.getPowerOnDelay=function(e,n){t.Request("luna://com.webos.service.commercial.signage.storageservice/settings/",{method:"get",parameters:{category:"commercial",keys:["powerOnDelay"]},onSuccess:function(t){if(!0===t.returnValue){var n={};n.delayTime=t.settings.powerOnDelay,"function"==typeof e&&e(n)}},onFailure:function(e){delete e.returnValue,"function"==typeof n&&(i(e,"PGPD","Power.getPowerOnDelay returns failure."),n(e))}})},e.prototype.getOnOffTimeSchedule=function(e,n){t.Request("luna://com.webos.service.commercial.signage.storageservice/",{method:"getOnOffTimeSchedule",parameters:{},onSuccess:function(t){if(!0===t.returnValue&&"function"==typeof e){var n={};n.onOffTimeScheduleList=t.settings.onOffTimeSchedule,"function"==typeof e&&e(n)}},onFailure:function(e){delete e.returnValue,"function"==typeof n&&(i(e,"TGAS","Power.getOnOffTimeSchedule returns failure."),n(e))}})},e.prototype.setOnOffTimeSchedule=function(e,n,o){t.Request("luna://com.webos.service.commercial.signage.storageservice/",{method:"setOnOffTimeSchedule",parameters:o,onSuccess:function(t){!0===t.returnValue&&"function"==typeof e&&"function"==typeof e&&e()},onFailure:function(e){delete e.returnValue,"function"==typeof n&&(i(e,"TGAS","Power.setOnOffTimeSchedule returns failure."),n(e))}})},e.prototype.unsetOnOffTimeSchedule=function(e,n){t.Request("luna://com.webos.service.commercial.signage.storageservice/",{method:"unsetOnOffTimeSchedule",parameters:{},onSuccess:function(t){!0===t.returnValue&&"function"==typeof e&&"function"==typeof e&&e()},onFailure:function(e){delete e.returnValue,"function"==typeof n&&(i(e,"TGAS","Power.unsetOnOffTimeSchedule returns failure."),n(e))}})},e}();